<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset = "UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<!-- <link rel="stylesheet" href="./style.css" /> -->
		<title>morph trial 1</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			@media screen and (max-width: 800px) {
  			#eyelid {
    			position: relative;
      			left: -300px;
  				}
  			#stars {
    			position: relative;
    			left: -300px;
  				}
  			section {
  				transform: scale(0.7, 0.7);
  			}
			}

			body {
				background: linear-gradient(#e66465, #9198e5);
			}

			section {
				width: 100%;
				height: 100%;
			}

			#eyelid {
				display: flex;
				flex-direction: safe column;
				justify-content: safe center;
			}

			svg {
				cursor: pointer;
			}

			body {
				font-family: sans-serif;
			}

			.star1{
				animation: star1 57s ease-in-out infinite alternate;
				transform-origin: center;
			}

			.star2{
				animation: star2 54s ease-in-out infinite alternate;
				transform-origin: center;
			}

			.star3{
				animation: star3 50s ease-in-out infinite alternate;
				transform-origin: center;
			}

			.star4{
				animation: star4 53s ease-in-out infinite alternate;
				transform-origin: center;
			}

			.star5{
				animation: star5 52s ease-in-out infinite alternate;
				transform-origin: center;
			}

			.star6{
				animation: star6 58s ease-in-out infinite alternate;
				transform-origin: center;
			}

			.star7{
				animation: star7 60s ease-in-out infinite alternate;
				transform-origin: center;
			}

			.star8{
				animation: star8 58s ease-in-out infinite alternate;
				transform-origin: center;
			}

			.rectangle{
				animation: rectangle 3s ease-in-out infinite alternate;
				transform-origin: center;
			}

			#big{
				animation: big 9s ease-in-out infinite alternate;
				transform-origin: center;
			}

			#small{
				animation: small 4.5s ease-in-out infinite alternate;
				transform-origin: center;
			}

			.polymorph{
				animation: polymorph 5s infinite;
				transform-origin: center;
				transform-box: fill-box;
			}

			@keyframes star1{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(10deg)
				}
			}

			@keyframes star2{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(-10deg)
				}

			}

			@keyframes star3{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(9deg)
				}

			}

			@keyframes star4{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(-16deg)
				}

			}

			@keyframes star5{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(7deg)
				}

			}

			@keyframes star6{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(-9deg)
				}

			}

			@keyframes star7{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(12deg)
				}

			}

			@keyframes star8{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(-18deg)
				}

			}

			@keyframes rectangle{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(20deg)
				}
			}

			@keyframes big{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(-15deg)
				}
			}

			@keyframes small{
				from{
					transform: rotateZ(0deg)
				}
				to{
					transform: rotateZ(50deg)
				}
			}

			@keyframes polymorph{
				from{
					transform: rotateZ(0deg);
				}
				to{
					transform: rotateZ(360deg);
				}
			}

			/*This is why there's a pink band on the bottom. Because the position is absolute :(. Fix later.*/
			.text1 {
				font-family: arial;
				font-style: italic;
				font-size: 1.4em;
				position: absolute;
				left: 300px;
				top: 450px;
				}

			.text1 .text-wrapper {
			  position: relative;
			  display: inline-block;
			  padding-top: 0.1em;
			  padding-right: 0.05em;
			  padding-bottom: 0.15em;
			}

			.text1 .letter {
			  display: inline-block;
			  line-height: 1em;

			}

		</style>

	</head>


	<body>
		<section>
			<svg id="stars" width="1700" height="600" viewBox="0 0 500 700" fill="none" style="transform: scale(1.6)">
				<g transform="translate(-300, 160)">
					<g transform="translate(20,20) scale(2)"><path class ="star1" d="M7.5 0C7.5 1.3666 7.5 2.57848 7.49187 3.65308C7.47678 11.1945 7.65076 11.9363 11.4134 11.9977C12.0132 11.9925 12.7041 12 13.5 12C12.7041 12 12.0132 12.0075 11.4134 11.9977C7.11495 12.035 7.5 12.7244 7.5 21.5C7.06147 13.168 8.16139 12.1436 3.04131 12.0177C2.31792 12.0195 1.47716 12 0.5 12C1.48358 12 2.32356 12 3.04131 12.0177C6.95525 12.0078 7.43344 11.3738 7.49187 3.65308C7.49402 2.57916 7.5 1.36736 7.5 0Z" fill="white"/></g>

					<g transform="translate(140,250)"><path class="star2" d="M7.5 0C7.5 1.3666 7.5 2.57848 7.49187 3.65308C7.47678 11.1945 7.65076 11.9363 11.4134 11.9977C12.0132 11.9925 12.7041 12 13.5 12C12.7041 12 12.0132 12.0075 11.4134 11.9977C7.11495 12.035 7.5 12.7244 7.5 21.5C7.06147 13.168 8.16139 12.1436 3.04131 12.0177C2.31792 12.0195 1.47716 12 0.5 12C1.48358 12 2.32356 12 3.04131 12.0177C6.95525 12.0078 7.43344 11.3738 7.49187 3.65308C7.49402 2.57916 7.5 1.36736 7.5 0Z" fill="white"/></g>

					<g transform="translate(300,5) scale (1.5)"><path class="star3" d="M7.5 0C7.5 1.3666 7.5 2.57848 7.49187 3.65308C7.47678 11.1945 7.65076 11.9363 11.4134 11.9977C12.0132 11.9925 12.7041 12 13.5 12C12.7041 12 12.0132 12.0075 11.4134 11.9977C7.11495 12.035 7.5 12.7244 7.5 21.5C7.06147 13.168 8.16139 12.1436 3.04131 12.0177C2.31792 12.0195 1.47716 12 0.5 12C1.48358 12 2.32356 12 3.04131 12.0177C6.95525 12.0078 7.43344 11.3738 7.49187 3.65308C7.49402 2.57916 7.5 1.36736 7.5 0Z" fill="white"/></g>

					<g transform="translate(50,300) scale (2.1)"><path class="star4" d="M7.5 0C7.5 1.3666 7.5 2.57848 7.49187 3.65308C7.47678 11.1945 7.65076 11.9363 11.4134 11.9977C12.0132 11.9925 12.7041 12 13.5 12C12.7041 12 12.0132 12.0075 11.4134 11.9977C7.11495 12.035 7.5 12.7244 7.5 21.5C7.06147 13.168 8.16139 12.1436 3.04131 12.0177C2.31792 12.0195 1.47716 12 0.5 12C1.48358 12 2.32356 12 3.04131 12.0177C6.95525 12.0078 7.43344 11.3738 7.49187 3.65308C7.49402 2.57916 7.5 1.36736 7.5 0Z" fill="white"/></g>

					<g transform="translate(450,60) scale (1.7)"><path class="star5" d="M7.5 0C7.5 1.3666 7.5 2.57848 7.49187 3.65308C7.47678 11.1945 7.65076 11.9363 11.4134 11.9977C12.0132 11.9925 12.7041 12 13.5 12C12.7041 12 12.0132 12.0075 11.4134 11.9977C7.11495 12.035 7.5 12.7244 7.5 21.5C7.06147 13.168 8.16139 12.1436 3.04131 12.0177C2.31792 12.0195 1.47716 12 0.5 12C1.48358 12 2.32356 12 3.04131 12.0177C6.95525 12.0078 7.43344 11.3738 7.49187 3.65308C7.49402 2.57916 7.5 1.36736 7.5 0Z" fill="white"/></g>

					<g transform="translate(500,300) scale (0.7)"><path class="star6" d="M7.5 0C7.5 1.3666 7.5 2.57848 7.49187 3.65308C7.47678 11.1945 7.65076 11.9363 11.4134 11.9977C12.0132 11.9925 12.7041 12 13.5 12C12.7041 12 12.0132 12.0075 11.4134 11.9977C7.11495 12.035 7.5 12.7244 7.5 21.5C7.06147 13.168 8.16139 12.1436 3.04131 12.0177C2.31792 12.0195 1.47716 12 0.5 12C1.48358 12 2.32356 12 3.04131 12.0177C6.95525 12.0078 7.43344 11.3738 7.49187 3.65308C7.49402 2.57916 7.5 1.36736 7.5 0Z" fill="white"/></g>

					<g transform="translate(520,270) scale (1.9)"><path class="star7" d="M7.5 0C7.5 1.3666 7.5 2.57848 7.49187 3.65308C7.47678 11.1945 7.65076 11.9363 11.4134 11.9977C12.0132 11.9925 12.7041 12 13.5 12C12.7041 12 12.0132 12.0075 11.4134 11.9977C7.11495 12.035 7.5 12.7244 7.5 21.5C7.06147 13.168 8.16139 12.1436 3.04131 12.0177C2.31792 12.0195 1.47716 12 0.5 12C1.48358 12 2.32356 12 3.04131 12.0177C6.95525 12.0078 7.43344 11.3738 7.49187 3.65308C7.49402 2.57916 7.5 1.36736 7.5 0Z" fill="white"/></g>

					<g transform="translate(570,60) scale (0.9)"><path class="star8" d="M7.5 0C7.5 1.3666 7.5 2.57848 7.49187 3.65308C7.47678 11.1945 7.65076 11.9363 11.4134 11.9977C12.0132 11.9925 12.7041 12 13.5 12C12.7041 12 12.0132 12.0075 11.4134 11.9977C7.11495 12.035 7.5 12.7244 7.5 21.5C7.06147 13.168 8.16139 12.1436 3.04131 12.0177C2.31792 12.0195 1.47716 12 0.5 12C1.48358 12 2.32356 12 3.04131 12.0177C6.95525 12.0078 7.43344 11.3738 7.49187 3.65308C7.49402 2.57916 7.5 1.36736 7.5 0Z" fill="white"/></g>
				</g>
			</svg>

			<svg id="eyelid" width="1700" height="500" viewBox="0 0 130 800" fill="none" style="transform: scale(2) translate(-280px, -100px)" xmlns="http://www.w3.org/2000/svg">
				<defs>
					<!--gradient library-->
    				<linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
      				<stop offset="0%" style="stop-color:#93269C;stop-opacity:1" />
      				<stop offset="100%" style="stop-color:#68abfc;stop-opacity:1" />
    				</linearGradient>

    				<linearGradient id="grad2" x1="0%" y1="0%" x2="0%" y2="100%">
      				<stop offset="0%" style="stop-color:#FAEB89;stop-opacity:1" />
      				<stop offset="100%" style="stop-color:#fa9a2d;stop-opacity:1" />
    				</linearGradient>

    				<!--texture library-->
    				<pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
					<use href="#image0" transform="translate(0,-0.4) scale(0.008)"/>
					</pattern>
					<image id="image0" width="220" height="220" href="bedge-grunge.png"/>

    				<pattern id="pattern1" patternContentUnits="objectBoundingBox" width="1" height="1">
					<use href="#image1" transform="translate(0,-0.4) scale(0.01)"/>
					</pattern>
					<image id="image1" width="220" height="220" href="asfalt-dark.png"/>

					<pattern id="pattern2" patternContentUnits="objectBoundingBox" width="1" height="1">
					<use href="#image2" transform="translate(0,0) scale(0.01)"/>
					</pattern>
					<image id="image2" width="315" height="315" href="soft-wallpaper.png"/>

  				</defs>

				<g transform="translate(-1,17.4)"><path class = "eye" d="M1 99.9998C190.6 -80.0002 378 24.9998 448 99.9998C379 160 200 259 1 99.9998Z" fill="white" stroke="#910503" stroke-width="2"/></g>

				<g transform="translate(310,200)">
					<path id = "eyeball" class = "eyeball" d="M20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10Z" fill="#ba4120"/>
					<path id = "eyeballNoise" class = "eyeball" d="M20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10Z" fill="url(#pattern2)"/>
				</g>

				<g transform="translate(350,180)">
					<path id = "eyeball2" class = "eyeball2" d="M20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10Z" fill="#db8ced"/>
					<path id = "eyeball2noise" class = "eyeball2" d="M20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10Z" fill="url(#pattern2)"/>
				</g>

				<g transform="translate(296,210)"><path id = "planetRings1" d="M12.5 0.5C-33 0.5 76.5 10.1905 33.5 1.99999C54.5 5.99999 -7.99999 1.99999 12.5 0.5Z" stroke="#93269C"/></g>

				<g transform="translate(175,60)
								scale(0.4 0.4)">

					<path id = "big" class="rectangle" d="M1 1H139V238H1V1Z" stroke="none" stroke-width="7" fill="none"/>

					<path id = "medium" class="rectangle" d="M1 172L1 1H96L96 172H1Z" stroke="none" stroke-width="7" fill="none"/>

					<path id = "small" class="rectangle" d="M1 123L1 1H62L62 123H1Z" stroke="none" stroke-width="7" fill="none"/>

				</g>

				<g transform="translate(180,25) scale (0.2 0.2)">
					<path id = "polymorph" class = "polymorph" d="M44 71.5C18.1789 106.507 -4.00002 114 1.99998 216C7.99998 318 130.5 343.5 221.5 330C302.031 318.053 384 216 367.5 147C350.484 75.842 337.5 33.5 256 9.00003C191.358 -10.4323 96 1 44 71.5Z" fill="none" stroke="none" />
					<path id = "polymorphNoise" class = "polymorph" d="M44 71.5C18.1789 106.507 -4.00002 114 1.99998 216C7.99998 318 130.5 343.5 221.5 330C302.031 318.053 384 216 367.5 147C350.484 75.842 337.5 33.5 256 9.00003C191.358 -10.4323 96 1 44 71.5Z" fill="none" stroke="none" /></g>

				<g transform="translate(0,2)">
					<path class = "eye-motion" d="M0 115.387C200 -100 377 40.3873 447 115.387C378 175.387 199 274.388 0 115.387Z" fill="url(#grad1)" stroke="#910503" stroke-width="2"/>
					<!--texture-->
					<path id = "eye-motion" class = "eye-motion" d="M0 115.387C200 -100 377 40.3873 447 115.387C378 175.387 199 274.388 0 115.387Z" fill="url(#pattern0)"/>
				</g>

	      	</svg>

	      	<text class="text1" style="color: #f7cb3b00; text-shadow: 2px 2px #91050300;">
 			 	<span class="text-wrapper">
    			<span class="letters">
    					&ndash; inside your earliest happy memory
    			</span>
  				</span>
  				
			</text>

			<!--audio player 1-->
			<audio id="audio1">
  				<source src="LullabyForACat.mp3" type="audio/mp3"/>
  				Sorry, the audio isn't working! Email jisusheen at gmail dot com to let her know.
			</audio>

		</section>

		<script src="anime.min.js"></script>
		<script src="zepto.js"></script>
		<script src="app.min.js"></script>
		<script>

			const planet = "M20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10Z"
			const iris = "M188 94C188 145.915 145.915 188 94 188C42.0852 188 0 145.915 0 94C0 42.0852 42.0852 0 94 0C145.915 0 188 42.0852 188 94Z"

			const awake = "M0 115.387C200 -99.9999 377 40.3874 447 115.387C353 50 223 -68 0 115.387Z"
			const asleep = "M0 115.387C200 -100 377 40.3873 447 115.387C378 175.387 199 274.388 0 115.387Z"

			const eyeMotion = document.querySelector(".eye-motion");
			const idEyeMotion = document.querySelector("#eye-motion");
			const eyeballNoise = document.querySelector("#eyeballNoise");
			const eyeball2noise = document.querySelector("#eyeball2noise");
			const polymorph = document.querySelector(".polymorph");

			// Wrap every letter in a span
			var textWrapper = document.querySelector('.text1 .letters');
			textWrapper.innerHTML = textWrapper.textContent.replace(/([^\x00-\x80]|\w)/g, "<span class='letter'>$&</span>");

			//click for audio for Planet 1
			eyeballNoise.addEventListener("click", function(e){
			    let state = e.currentTarget.dataset.state;
			    if (state == "play") {
			    	document.querySelector("#audio1").pause();
			        e.currentTarget.dataset.state = "pause";
			    }
			    else {
			    	document.querySelector("#audio1").play();
			        e.currentTarget.dataset.state = "play";
			    }
			});

			let toggle0 = false;
			idEyeMotion.addEventListener("click", () => {
				const timeline0 = anime.timeline({
					duration: 750,
					easing: "easeOutExpo"
				});
				timeline0
					.add({
						targets: ".eye-motion",
						d: [{value: toggle0 ? asleep : awake}],
					});
				toggle0 = !toggle0;
			});

			let toggle = false;
			eyeballNoise.addEventListener("click", () => {
				//we need to use anime.js
				const timeline = anime.timeline({
					duration : 750,
					easing : "easeOutExpo"
				});
				//add different animations to the timeline
				timeline
					//planet becomes a bigger circle
					.add({
						targets: ".eyeball",
						d: [{value: toggle ? planet : iris}],
						//can add a comma and another morph if you want
					}, "-=100")
					//iris goes on a rotating path to the eye
					.add({
						targets: ".eyeball",
						rotate: toggle ? 0 : 180,
					}, "-=700"
					)
					//eye opens
					.add({
			 			targets: ".eye-motion",
			 			d: [{value: toggle ? asleep : awake}]
			 		}, "-=500"
			 		)
			 		//make animation appear
			 		.add({
			 			targets: ".rectangle",
			 			stroke: toggle ? "none" : "url(#grad2)"
			 		}, "-=700"
			 		)
			 		//make planet rings disappear
			 		.add({
			 			targets: "#planetRings1",
			 			stroke: toggle ? "#93269C" : "none"
			 		}, "-=700"
			 		)
			 		//make other planets disappear
			 		.add({
			 			targets: "#eyeball2",
			 			fill: toggle ? "#db8ced" : "none"
			 		}, "-=700"
			 		)
			 		//make other planet noise disappear
			 		.add({
			 			targets: "#eyeball2noise",
			 			fill: toggle ? "url(#pattern2)" : "none"
			 		}, "-=700"
			 		)
			 		//make text appear
			 		.add({
			 			targets: '.text1 .letter',
			 			color: toggle ? "#f7cb3b00" : "#f7cb3b",
			 			textShadow: toggle ? " 2px 2px #91050300" : "2px 2px #910503"
			 		}, "-=700")
					.add({
					    targets: '.text1 .letter',
					    opacity: toggle ? 0 : [0,1],
					    easing: "easeOutExpo",
					    duration: 600,
					    offset: '-=775',
					    delay: (el, i) => 34 * (i+1)
					}, "-=700");

			 		toggle = !toggle;
			});

			let toggle2 = false;

			eyeball2noise.addEventListener("click",() => {
				const timeline2 = anime.timeline({
					duration : 750,
					easing : "easeOutExpo"
				});
				timeline2
					//planet becomes a bigger circle
					.add({
						targets: ".eyeball2",
						d: [{value: toggle2 ? planet : iris}],
						//can add a comma and another morph if you want
					})
					//iris goes on a rotating path to the eye
					.add({
						targets: ".eyeball2",
						rotate: toggle2 ? 0 : 170,
					}, "-=700"
					)
					//eye opens
					.add({
			 			targets: ".eye-motion",
			 			d: [{value: toggle2 ? asleep : awake}]
			 		}, "-=500"
			 		)
					//make other planets disappear
			 		.add({
			 			targets: "#eyeball",
			 			fill: toggle2 ? "#ba4120" : "none"
			 		}, "-=700"
			 		)
			 		.add({
			 			targets: "#planetRings1",
			 			stroke: toggle2 ? "#93269C" : "none"
			 		}, "-=700"
			 		)
			 		//make other planet noise disappear
			 		.add({
			 			targets: "#eyeballNoise",
			 			fill: toggle2 ? "url(#pattern2)" : "none"
			 		}, "-=700"
			 		)
			 		//make noise for animation appear
			 		.add({
			 			targets: "#polymorphNoise",
			 			fill: toggle2 ? "none" : "url(#pattern0)"
			 		}, "-=750"
			 		)
			 		//make animation appear
			 		.add({
			 			targets: "#polymorph",
			 			fill: toggle2 ? "none" : "#f3c5fa"
			 		}, "-=750"
			 		);

					toggle2 =!toggle2;
			});

			var stretchingPolymorph = anime({
				targets: ".polymorph",
				d: [
					{value: "M34 75C12.3408 106.478 -3.99998 127 2.00002 229C9.76473 361 184.907 359.702 228.5 319C326.5 227.5 337.5 196 322.5 121.5C308.059 49.7752 223 1 166 1C98.5 1 71.5 20.5 34 75Z"},
					{value: "M0.999969 72.5C1 118.5 53 124 59 226C65 328 173 306.958 216.5 284C288.5 246 303.5 185 288.5 110.5C274.059 38.7752 177 0.5 120 0.5C52.5 0.500002 0.999926 6.3449 0.999969 72.5Z"},
					{value: "M27.5 96.5C27.5 140 -3.99999 154.5 2.00001 256.5C8.00001 358.5 214 347.958 257.5 325C329.5 287 336.5 197.5 284.5 153C228.912 105.429 250 66 209 19.5001C164.359 -31.1299 27.5 28.6141 27.5 96.5Z"},
					{value: "M3.49999 50.5C-14.0507 90.3023 66.5 115 72.5 217C78.5 319 212.5 312.458 256 289.5C328 251.5 324.5 144 272.5 99.5C216.912 51.9294 200.5 83.4999 159.5 37C114.859 -13.63 31.5 -13 3.49999 50.5Z"},
					{value: "M47.5 88.5C29.9494 128.302 -4 151 2 253C8 355 185.5 362 272 325C346.852 292.982 414.5 133 362.5 88.5C306.912 40.9294 274.5 67 233.5 20.5C188.859 -30.1299 75.5001 25 47.5 88.5Z"}
				],
				easing: 'easeInOutQuad',
				duration: 5000,
				loop: true,
				direction: 'alternate'
			});


		</script>
	</body>
